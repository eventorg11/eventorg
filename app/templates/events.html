{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è - –°–∏—Å—Ç–µ–º–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞—É—á–Ω–æ–π –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <div class="breadcrumb-container">
        <ul class="breadcrumb-list">
            <li class="breadcrumb-item">
                <a href="{% url 'index' %}" class="breadcrumb-link">–ì–ª–∞–≤–Ω–∞—è</a>
            </li>
            <li class="breadcrumb-item active">
                <span>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</span>
            </li>
        </ul>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1 class="page-title">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h1>
        <p class="page-subtitle">–í—Å–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∏ –ø—Ä–æ—à–µ–¥—à–∏–µ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏</p>
    </div>
</div>

<div class="events-section">
    <div class="container">
        <div class="events-filters">
            <form method="get" action="{% url 'events' %}" class="filters-form">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="search" class="filter-label">üîç –ü–æ–∏—Å–∫</label>
                        <input type="text" 
                               id="search" 
                               name="search" 
                               class="form-control filter-input" 
                               placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ..." 
                               value="{{ search_query }}">
                    </div>
                    
                    <div class="filter-group">
                        <label for="status" class="filter-label">üìä –°—Ç–∞—Ç—É—Å</label>
                        <select id="status" name="status" class="form-control filter-select">
                            <option value="">–í—Å–µ</option>
                            <option value="not_started" {% if status_filter == 'not_started' %}selected{% endif %}>–ù–µ –Ω–∞—á–∞–ª–∞—Å—å</option>
                            <option value="completed" {% if status_filter == 'completed' %}selected{% endif %}>–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="type" class="filter-label">üåê –¢–∏–ø</label>
                        <select id="type" name="type" class="form-control filter-select">
                            <option value="">–í—Å–µ</option>
                            <option value="online" {% if type_filter == 'online' %}selected{% endif %}>–û–Ω–ª–∞–π–Ω</option>
                            <option value="offline" {% if type_filter == 'offline' %}selected{% endif %}>–û—Ñ–ª–∞–π–Ω</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="sort" class="filter-label">üîÑ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
                        <select id="sort" name="sort" class="form-control filter-select">
                            <option value="-start_date" {% if sort_by == '-start_date' %}selected{% endif %}>–î–∞—Ç–∞ (–Ω–æ–≤—ã–µ)</option>
                            <option value="start_date" {% if sort_by == 'start_date' %}selected{% endif %}>–î–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ)</option>
                            <option value="title" {% if sort_by == 'title' %}selected{% endif %}>–ù–∞–∑–≤–∞–Ω–∏–µ (–ê-–Ø)</option>
                            <option value="-title" {% if sort_by == '-title' %}selected{% endif %}>–ù–∞–∑–≤–∞–Ω–∏–µ (–Ø-–ê)</option>
                        </select>
                    </div>
                    
                    <div class="filter-actions">
                        <button type="submit" class="btn btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        <a href="{% url 'events' %}" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
                    </div>
                </div>
            </form>
        </div>
        
        {% if conferences %}
            <div class="events-grid">
                {% for conference in conferences %}
                    <div class="conference-card">
                        <div class="conference-header">
                            <div class="conference-date">
                                <span class="date-day">{{ conference.start_date|date:"d" }}</span>
                                <span class="date-month">{{ conference.start_date|date:"M"|upper }}</span>
                                <span class="date-year">{{ conference.start_date|date:"Y" }}</span>
                            </div>
                            <div class="conference-status status-{{ conference.status }}">
                                <span>{{ conference.get_status_display }}</span>
                            </div>
                        </div>
                        <div class="conference-body">
                            <h3 class="conference-title">{{ conference.title }}</h3>
                            {% if conference.short_description %}
                                <p class="conference-short-desc">{{ conference.short_description }}</p>
                            {% else %}
                                <p class="conference-short-desc">{{ conference.description|truncatewords:20 }}</p>
                            {% endif %}
                            <div class="conference-details">
                                <div class="detail-item">
                                    <span class="detail-icon">üìç</span>
                                    <span class="detail-text">
                                        {% if conference.is_online %}
                                            –û–Ω–ª–∞–π–Ω
                                        {% else %}
                                            {{ conference.location }}
                                        {% endif %}
                                    </span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">üïê</span>
                                    <span class="detail-text">
                                        {{ conference.start_date|date:"d.m.Y H:i" }}
                                    </span>
                                </div>
                                {% if conference.organizer_name %}
                                <div class="detail-item">
                                    <span class="detail-icon">üë§</span>
                                    <span class="detail-text">{{ conference.organizer_name }}</span>
                                </div>
                                {% endif %}
                                {% if conference.max_participants %}
                                <div class="detail-item">
                                    <span class="detail-icon">üë•</span>
                                    <span class="detail-text">–î–æ {{ conference.max_participants }} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                                </div>
                                {% endif %}
                            </div>
                            {% if conference.is_online and conference.online_link %}
                            <div class="conference-online">
                                <a href="{{ conference.online_link }}" target="_blank" class="online-link">
                                    üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω
                                </a>
                            </div>
                            {% endif %}
                            {% if conference.registration_deadline and conference.is_registration_open %}
                            <div class="conference-registration">
                                <p class="registration-info">
                                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ: {{ conference.registration_deadline|date:"d.m.Y H:i" }}
                                </p>
                            </div>
                            {% endif %}
                            <div class="conference-action">
                                <a href="{% url 'event_detail' event_id=conference.id %}" class="btn btn-primary btn-detail">
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-events">
                <p class="no-events-message">
                    {% if search_query or status_filter or type_filter %}
                        –ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.
                    {% else %}
                        –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.
                    {% endif %}
                </p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

